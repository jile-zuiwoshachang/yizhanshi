<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yizhanshi.course.mapper.TeacherMapper">

    <resultMap type="com.yizhanshi.course.api.domain.Teacher" id="TeacherResult">
        <id     property="teacherId"       column="teacher_id"      />
        <result property="teacherName"     column="teacher_name"    />
        <result property="teacherSex"     column="teacher_sex"    />
        <result property="teacherAge"     column="teacher_age"    />
        <result property="teacherStudentid"       column="teacher_studentid"      />
        <result property="teacherDescription"     column="teacher_description"    />
        <result property="teacherPicture"     column="teacher_picture"    />
        <result property="teacherEmail"     column="teacher_email"    />
        <result property="teacherPhone"     column="teacher_phone"    />
        <result property="teacherQq"     column="teacher_qq"    />
        <result property="teacherWechat"     column="teacher_wechat"    />
        <result property="status"     column="status"    />
        <result property="delFlag"     column="del_flag"    />
        <result property="createTime"     column="create_time"    />
        <result property="createBy"     column="create_by"    />
        <result property="updateTime"     column="update_time"    />
        <result property="updateBy"     column="update_by"    />
        <result property="remark"     column="remark"    />
    </resultMap>
    
    <sql id="selectTeacherVo">
        select t.teacher_id, t.teacher_name, t.teacher_sex,t.teacher_age,t.teacher_studentid,t.teacher_description,
        t.teacher_picture,t.teacher_email,t.teacher_phone,t.teacher_qq,t.teacher_wechat,
        t.status, t.del_flag,t.create_by, t.create_time, t.remark
        from business_teacher t
    </sql>
    <select id="selectTeacherList" parameterType="com.yizhanshi.course.api.domain.Teacher" resultMap="TeacherResult">
        <include refid="selectTeacherVo" />
        where t.del_flag = '0'
        <if test="teacherId != null and teacherId != 0">
            AND t.teacher_id = #{teacherId}
        </if>
        <if test="teacherName != null and teacherName != ''">
            AND t.teacher_name like concat('%', #{teacherName}, '%')
        </if>
        <if test="status != null and status != ''">
            AND t.status = #{status}
        </if>
        <if test="params.beginTime != null and params.beginTime != ''"><!-- 开始时间检索 -->
            AND date_format(t.create_time,'%Y%m%d') &gt;= date_format(#{params.beginTime},'%Y%m%d')
        </if>
        <if test="params.endTime != null and params.endTime != ''"><!-- 结束时间检索 -->
            AND date_format(t.create_time,'%Y%m%d') &lt;= date_format(#{params.endTime},'%Y%m%d')
        </if>
    </select>
    <select id="selectTeacherById" parameterType="Long" resultMap="TeacherResult">
        <include refid="selectTeacherVo">
        </include>
        where t.teacher_id=#{teacherId}
    </select>

    <insert id="insertTeacher" parameterType="com.yizhanshi.course.api.domain.Teacher" useGeneratedKeys="true" keyProperty="teacherId">
        insert into business_teacher (
        <if test="teacherId != null and teacherId != 0">teacher_id,</if>
        <if test="teacherName != null and teacherName != ''">teacher_name,</if>
        <if test="teacherSex != null and teacherSex != ''">teacher_sex,</if>
        <if test="teacherAge != null and teacherAge != 0">teacher_age,</if>
        <if test="teacherStudentid != null and teacherStudentid != ''">teacher_studentid,</if>
        <if test="teacherDescription != null and teacherDescription != ''">teacher_description,</if>
        <if test="teacherPicture != null and teacherPicture != ''">teacher_picture,</if>
        <if test="teacherEmail != null and teacherEmail != ''">teacher_email,</if>
        <if test="teacherPhone != null and teacherPhone != ''">teacher_phone,</if>
        <if test="teacherQq != null and teacherQq != ''">teacher_qq,</if>
        <if test="teacherWechat != null and teacherWechat != ''">teacher_wechat,</if>
        <if test="status != null and status != ''">status,</if>
        <if test="createBy != null and createBy != ''">create_by,</if>
        <if test="remark != null and remark != ''">remark,</if>
        create_time
        )values(
        <if test="teacherId != null and teacherId != 0">#{teacherId},</if>
        <if test="teacherName != null and teacherName != ''">#{teacherName},</if>
        <if test="teacherSex != null and teacherSex != ''">#{teacherSex},</if>
        <if test="teacherAge != null and teacherAge != 0">#{teacherAge},</if>
        <if test="teacherStudentid != null and teacherStudentid != ''">#{teacherStudentid},</if>
        <if test="teacherDescription != null and teacherDescription != ''">#{teacherDescription},</if>
        <if test="teacherPicture != null and teacherPicture != ''">#{teacherPicture},</if>
        <if test="teacherEmail != null and teacherEmail != ''">#{teacherEmail},</if>
        <if test="teacherPhone != null and teacherPhone != ''">#{teacherPhone},</if>
        <if test="teacherQq != null and teacherQq != ''">#{teacherQq},</if>
        <if test="teacherWechat != null and teacherWechat != ''">#{teacherWechat},</if>
        <if test="status != null and status != ''">#{status},</if>
        <if test="createBy != null and createBy != ''">#{createBy},</if>
        <if test="remark != null and remark != ''">#{remark},</if>
        sysdate()
        )
    </insert>

    <update id="updateTeacher" parameterType="com.yizhanshi.course.api.domain.Teacher">
        update business_teacher
        <set>
            <if test="teacherId != null and teacherId != 0">teacher_id=#{teacherId},</if>
            <if test="teacherName != null and teacherName != ''">teacher_name=#{teacherName},</if>
            <if test="teacherSex != null and teacherSex != ''">teacher_sex=#{teacherSex},</if>
            <if test="teacherAge != null and teacherAge != 0">teacher_age=#{teacherAge},</if>
            <if test="teacherStudentid != null and teacherStudentid != ''">teacher_studentid=#{teacherStudentid},</if>
            <if test="teacherDescription != null and teacherDescription != ''">teacher_description=#{teacherDescription},</if>
            <if test="teacherPicture != null and teacherPicture != ''">teacher_picture=#{teacherPicture},</if>
            <if test="teacherEmail != null and teacherEmail != ''">teacher_email=#{teacherEmail},</if>
            <if test="teacherPhone != null and teacherPhone != ''">teacher_phone=#{teacherPhone},</if>
            <if test="teacherQq != null and teacherQq != ''">teacher_qq=#{teacherQq},</if>
            <if test="teacherWechat != null and teacherWechat != ''">teacher_wechat=#{teacherWechat},</if>
            <if test="status != null and status != ''">status=#{status},</if>
            <if test="updateBy != null and updateBy != ''">update_by=#{updateBy},</if>
            <if test="remark != null and remark != ''">remark=#{remark},</if>
            update_time = sysdate()
        </set>
        where teacher_id = #{teacherId}
    </update>
    <delete id="deleteTeacher" parameterType="Long">
        update business_teacher set del_flag = '2' where teacher_id in
        <foreach collection="array" item="teacherId" open="(" separator="," close=")">
            #{teacherId}
        </foreach>
    </delete>
</mapper>